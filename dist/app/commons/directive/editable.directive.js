!function(i){"use strict";i.module("directives").directive("editable",function(){var t=["$scope","$timeout","tabNavigatorService",function(t,e,n){var o,r=this;r.isRemark=void 0!=r.remark,r.isPrice=void 0!=r.price,r.isAmount=void 0!=r.amount,r.toolTipText=function(){return r.isRemark?"":r.isPrice?"请输入您的价格，不确定价格时可不输入":r.isAmount?"请输入您的数量，不确定数量时可不输入":""}(),r.beginEdit=function(i){r.isEditing=!0;var t=i.target;e(function(){$(t).parents("td").addClass("is-editing"),$(t).next().focus()}),r.textChanged()},r.blur=function(i){r.isEditing=!1;var t=i.target;e(function(){$(t).parents("td").removeClass("is-editing")}),d()},r.textChanged=function(){r.isRemark||(r.value&&o?(d(),o=a()):o=a())};var a=function(){var i=3e3,t=e(function(){r.showTooltip=!0},i);return t},d=function(){r.showTooltip=!1,e.cancel(o)};(function(){r.isPrice&&r.isbeginediting&&(r.isEditing=!0,e(function(){$($element).addClass("is-editing"),$($element).find("input").focus()}),r.textChanged())})();r.keydown=function(o){o&&(9!==o.keyCode&&13!==o.keyCode||(o.cancelBubble=!0,n.findNextTd(o,function(n){var o=i.element(n).controller("editable");return o?(o.isEditing=!0,e(function(){$(n).addClass("is-editing"),$(n).find("input").focus()}),void o.textChanged()):void t.$emit("onTabNavigating",n)})))},r.initInput=function(i){var t=i||window.event,e=t.target||t.srcElement;if(e){if("A"===e.nodeName){$(e).parentsUntil("tr")}console.log("initInput")}}}];return{restrict:"C",templateUrl:"app/commons/directive/editable.directive.html",scope:{value:"=ngModel",remark:"@",price:"@",amount:"@",isbeginediting:"@"},controller:t,bindToController:!0,controllerAs:"vm"}})}(angular);